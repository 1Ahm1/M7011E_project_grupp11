{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ahmad/M7011E_project_grupp11/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { AdminService } from '../services/admin.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction AdminHomeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"figure\", 7);\n    i0.ɵɵelement(5, \"img\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 9)(7, \"p\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 11);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 9)(20, \"p\", 10);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 11);\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 6)(25, \"div\", 12)(26, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function AdminHomeComponent_div_3_Template_a_click_26_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const o_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeOrder(o_r1.id));\n    });\n    i0.ɵɵtext(27, \"Remove\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const o_r1 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", o_r1.book.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(o_r1.book.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(o_r1.book.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Language: \", o_r1.book.language, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(o_r1.book.year);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Quantity: \", o_r1.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: $\", (o_r1.quantity * o_r1.book.price).toFixed(2), \" USD\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Ordered By: \", o_r1.customer.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(o_r1.customer.email);\n  }\n}\nexport class AdminHomeComponent {\n  constructor() {\n    this.orders = [];\n    this.adminService = inject(AdminService);\n    this.getOrderList();\n  }\n  getOrderList() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const orders = yield _this.adminService.getOrders();\n        _this.orders = orders;\n      } catch (e) {\n        console.log('error fetching orders');\n      }\n    })();\n  }\n  removeOrder(orderId) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.adminService.removeOrder(orderId);\n        window.location.reload();\n      } catch (e) {\n        console.log('error deleting order');\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function AdminHomeComponent_Factory(t) {\n    return new (t || AdminHomeComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminHomeComponent,\n    selectors: [[\"app-admin-home\"]],\n    decls: 4,\n    vars: 1,\n    consts: [[1, \"title\"], [1, \"columns\", \"is-multiline\", \"mt-4\"], [\"class\", \"column is-12\", 4, \"ngFor\", \"ngForOf\"], [1, \"column\", \"is-12\"], [1, \"box\"], [1, \"columns\", \"is-mobile\"], [1, \"column\", \"is-narrow\"], [1, \"image\", \"is-96x96\"], [\"onerror\", \"this.onerror=null; this.src='https://marketplace.canva.com/EAFaQMYuZbo/1/0/1003w/canva-brown-rusty-mystery-novel-book-cover-hG1QhA7BiBU.jpg';\", \"alt\", \"Book Image\", 3, \"src\"], [1, \"column\"], [1, \"title\", \"is-5\"], [1, \"subtitle\", \"is-6\"], [1, \"buttons\"], [1, \"button\", \"is-danger\", \"is-small\", 3, \"click\"]],\n    template: function AdminHomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\", 0);\n        i0.ɵɵtext(1, \"Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtemplate(3, AdminHomeComponent_div_3_Template, 28, 9, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n      }\n    },\n    dependencies: [i1.NgForOf],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["inject","AdminService","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","AdminHomeComponent_div_3_Template_a_click_26_listener","restoredCtx","ɵɵrestoreView","_r3","o_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","removeOrder","id","ɵɵadvance","ɵɵproperty","book","image","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","author","ɵɵtextInterpolate1","language","year","quantity","price","toFixed","customer","email","AdminHomeComponent","constructor","orders","adminService","getOrderList","_this","_asyncToGenerator","getOrders","e","console","log","orderId","_this2","window","location","reload","_","_2","selectors","decls","vars","consts","template","AdminHomeComponent_Template","rf","ctx","ɵɵtemplate","AdminHomeComponent_div_3_Template"],"sources":["C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\admin-home\\admin-home.component.ts","C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\admin-home\\admin-home.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { AdminService } from '../services/admin.service';\nimport { AdminOrder } from '../interfaces/entities';\n\n@Component({\n  selector: 'app-admin-home',\n  templateUrl: './admin-home.component.html'\n})\nexport class AdminHomeComponent {\n  orders: AdminOrder[] = [];\n  adminService: AdminService = inject(AdminService);\n  constructor() {\n    this.getOrderList();\n  }\n  async getOrderList() {\n    try\n    {\n      const orders = await this.adminService.getOrders();\n      this.orders = orders;\n    }\n    catch(e) {\n      console.log('error fetching orders');\n    }\n  }\n\n  async removeOrder(orderId: number) {\n    try\n    {\n      await this.adminService.removeOrder(orderId);\n      window.location.reload();\n    }\n    catch(e) {\n      console.log('error deleting order');\n    }\n  }\n}\n","<h1 class=\"title\">Orders</h1>\n\n<div class=\"columns is-multiline mt-4\">\n\n    <div class=\"column is-12\" *ngFor=\"let o of orders\">\n        <div class=\"box\">\n            <div class=\"columns is-mobile\">\n                <div class=\"column is-narrow\">\n                    <figure class=\"image is-96x96\">\n                        <img [src]=\"o.book.image\" onerror=\"this.onerror=null; this.src='https://marketplace.canva.com/EAFaQMYuZbo/1/0/1003w/canva-brown-rusty-mystery-novel-book-cover-hG1QhA7BiBU.jpg';\" alt=\"Book Image\">\n                    </figure>\n                </div>\n                <div class=\"column\">\n                    <p class=\"title is-5\">{{o.book.name}}</p>\n                    <p class=\"subtitle is-6\">{{o.book.author}}</p>\n                    <p>Language: {{o.book.language}}</p>\n                    <p>{{o.book.year}}</p>\n                    <p>Quantity: {{o.quantity}}</p>\n                    <p>Price: ${{(o.quantity * o.book.price).toFixed(2)}} USD</p>\n                </div>\n                <div class=\"column\">\n                    <p class=\"title is-5\">Ordered By: {{o.customer.name}}</p>\n                    <p class=\"subtitle is-6\">{{o.customer.email}}</p>\n                </div>\n                <div class=\"column is-narrow\">\n                    <div class=\"buttons\">\n                        <a class=\"button is-danger is-small\" (click)=\"removeOrder(o.id)\">Remove</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}