{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ahmad/M7011E_project_grupp11/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { BookService } from '../services/book.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = function (a1) {\n  return [\"/book\", a1];\n};\nfunction BookListComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"div\", 21)(3, \"figure\", 22);\n    i0.ɵɵelement(4, \"img\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 24)(6, \"div\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 26);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const b_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(7, _c0, b_r3.id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", b_r3.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(b_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(b_r3.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(b_r3.year);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Language: \", b_r3.language, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", b_r3.price, \" USD\");\n  }\n}\nfunction BookListComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, BookListComponent_div_18_div_1_Template, 16, 9, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const books_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", books_r1);\n  }\n}\nconst _c1 = function () {\n  return [\"/cart\"];\n};\nexport class BookListComponent {\n  constructor(router) {\n    this.router = router;\n    this.bookList = [[]];\n    this.bookService = inject(BookService);\n    this.columns = 4;\n    this.search = '';\n    this.getBookList();\n  }\n  goToHome() {\n    this.router.navigate(['home/']);\n  }\n  updateFilter() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.bookList = [[]];\n      if (_this.search == '') {\n        yield _this.getBookList();\n      } else {\n        let books = yield _this.bookService.getBooks();\n        books = books.filter(book => book.name.toLowerCase().includes(_this.search.toLowerCase()));\n        for (let i = 0; i < books.length; i += _this.columns) {\n          _this.bookList.push(books.slice(i, i + _this.columns));\n        }\n      }\n    })();\n  }\n  getBookList() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const books = yield _this2.bookService.getBooks();\n        for (let i = 0; i < books.length; i += _this2.columns) {\n          _this2.bookList.push(books.slice(i, i + _this2.columns));\n        }\n      } catch (e) {\n        console.log('error fetching books');\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function BookListComponent_Factory(t) {\n    return new (t || BookListComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BookListComponent,\n    selectors: [[\"app-book-list\"]],\n    decls: 19,\n    vars: 4,\n    consts: [[\"role\", \"navigation\", \"aria-label\", \"main navigation\", 1, \"navbar\", \"has-background-light\"], [\"id\", \"navbarBasicExample\", 1, \"navbar-menu\"], [1, \"navbar-start\"], [1, \"navbar-item\", \"is-clickable\", 3, \"click\"], [\"src\", \"../../assets/icons/library.jpg\", \"alt\", \"\"], [1, \"navbar-end\"], [1, \"navbar-item\"], [\"id\", \"search\", 1, \"bd-search\"], [1, \"control\", \"has-icons-left\"], [1, \"algolia-autocomplete\", 2, \"position\", \"relative\", \"display\", \"inline-block\", \"direction\", \"ltr\"], [\"id\", \"algoliaSearch\", \"type\", \"text\", \"placeholder\", \"Search by book name\", 1, \"input\", \"is-rounded\", \"ds-input\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"icon\", \"is-small\", \"is-left\"], [\"src\", \"../../assets/icons/search.png\", \"alt\", \"\"], [1, \"navbar-item\", \"is-clickable\", 3, \"routerLink\"], [\"src\", \"../../assets/icons/shopping_cart.png\", \"alt\", \"\"], [1, \"m-6\"], [\"class\", \"columns\", 4, \"ngFor\", \"ngForOf\"], [1, \"columns\"], [\"class\", \"column is-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"column\", \"is-3\"], [1, \"card\", 3, \"routerLink\"], [1, \"card-image\"], [1, \"image\", \"is-4by3\"], [\"onerror\", \"this.onerror=null; this.src='https://d1csarkz8obe9u.cloudfront.net/posterpreviews/art-book-cover-design-template-34323b0f0734dccded21e0e3bebf004c_screen.jpg?ts=1637015198';\", \"alt\", \"Image\", 3, \"src\"], [1, \"card-content\"], [1, \"title\", \"is-6\"], [1, \"subtitle\", \"is-7\"]],\n    template: function BookListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵlistener(\"click\", function BookListComponent_Template_div_click_3_listener() {\n          return ctx.goToHome();\n        });\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementStart(5, \"div\");\n        i0.ɵɵtext(6, \"Online Book Shop\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"p\", 8)(11, \"span\", 9)(12, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function BookListComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.search = $event;\n        })(\"keyup.enter\", function BookListComponent_Template_input_keyup_enter_12_listener() {\n          return ctx.updateFilter();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"span\", 11);\n        i0.ɵɵelement(14, \"img\", 12);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(15, \"div\", 13);\n        i0.ɵɵelement(16, \"img\", 14);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(17, \"section\", 15);\n        i0.ɵɵtemplate(18, BookListComponent_div_18_Template, 2, 1, \"div\", 16);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngModel\", ctx.search);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c1));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.bookList);\n      }\n    },\n    dependencies: [i2.NgForOf, i1.RouterLink, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["inject","BookService","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","b_r3","id","image","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","author","year","ɵɵtextInterpolate1","language","price","ɵɵtemplate","BookListComponent_div_18_div_1_Template","books_r1","BookListComponent","constructor","router","bookList","bookService","columns","search","getBookList","goToHome","navigate","updateFilter","_this","_asyncToGenerator","books","getBooks","filter","book","toLowerCase","includes","i","length","push","slice","_this2","e","console","log","_","ɵɵdirectiveInject","i1","Router","_2","selectors","decls","vars","consts","template","BookListComponent_Template","rf","ctx","ɵɵlistener","BookListComponent_Template_div_click_3_listener","BookListComponent_Template_input_ngModelChange_12_listener","$event","BookListComponent_Template_input_keyup_enter_12_listener","BookListComponent_div_18_Template","ɵɵpureFunction0","_c1"],"sources":["C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\book-list\\book-list.component.ts","C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\book-list\\book-list.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { BookService } from '../services/book.service';\nimport { Book } from '../interfaces/entities';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-book-list',\n  templateUrl: './book-list.component.html'\n})\nexport class BookListComponent {\n  bookList: Book[][] = [[]]\n  bookService: BookService = inject(BookService)\n  columns = 4\n  search: String = '';\n  constructor(private router: Router) {\n    this.getBookList()\n  }\n  goToHome() {\n    this.router.navigate(['home/']);\n  }\n  async updateFilter() {\n    this.bookList = [[]];\n    if(this.search == '')\n    {\n      await this.getBookList()\n    }\n    else\n    {\n      let books = await this.bookService.getBooks();\n      books = books.filter((book) =>\n        book.name.toLowerCase().includes(this.search.toLowerCase())\n      );\n        for(let i = 0; i < books.length; i += this.columns) {\n          this.bookList.push(books.slice(i, i + this.columns))\n        }\n    }\n      \n  }\n  async getBookList() {\n    try\n    {\n      const books = await this.bookService.getBooks();\n      for(let i = 0; i < books.length; i += this.columns) {\n        this.bookList.push(books.slice(i, i + this.columns))\n      }\n    }\n    catch(e) {\n      console.log('error fetching books');\n    }\n  }\n}\n","<nav class=\"navbar has-background-light\" role=\"navigation\" aria-label=\"main navigation\">\n    <div id=\"navbarBasicExample\" class=\"navbar-menu\">\n        <div class=\"navbar-start\">\n            <div class = \"navbar-item is-clickable\" (click) = goToHome()>\n                <img src=\"../../assets/icons/library.jpg\" alt=\"\">\n                <div>Online Book Shop</div>\n            </div>\n        </div>\n        <div class=\"navbar-end\">\n            <div class = \"navbar-item\">\n                <div id=\"search\" class=\"bd-search\">\n                    <p class=\"control has-icons-left\">\n                      <span class=\"algolia-autocomplete\" style=\"position: relative; display: inline-block; direction: ltr;\">\n                        <input id=\"algoliaSearch\" class=\"input is-rounded ds-input\" type=\"text\" placeholder=\"Search by book name\" [(ngModel)]=\"search\" (keyup.enter)=\"updateFilter()\">\n                      </span>\n                      <span class=\"icon is-small is-left\">\n                        <img src=\"../../assets/icons/search.png\" alt=\"\">\n                      </span>\n                    </p>\n                  </div>\n            </div>\n            <div class = \"navbar-item is-clickable\" [routerLink]=\"['/cart']\">\n                <img src=\"../../assets/icons/shopping_cart.png\" alt=\"\">\n            </div>\n        </div>\n    </div>\n</nav>\n<section class = \"m-6\">\n    <div class = \"columns\" *ngFor = \"let books of bookList\">\n        <div class = \"column is-3\" *ngFor = \"let b of books\">\n            <div class = \"card\" [routerLink]=\"['/book', b.id]\">\n                <div class=\"card-image\">\n                    <figure class=\"image is-4by3\">\n                        <img [src]=\"b.image\" onerror=\"this.onerror=null; this.src='https://d1csarkz8obe9u.cloudfront.net/posterpreviews/art-book-cover-design-template-34323b0f0734dccded21e0e3bebf004c_screen.jpg?ts=1637015198';\" alt=\"Image\">\n                    </figure>\n                </div>\n                <div class = \"card-content\">\n                    <div class=\"title is-6\">{{b.name}}</div>\n                    <div class=\"subtitle is-7\">{{b.author}}</div>\n                    <div>{{b.year}}</div>\n                    <div>Language: {{b.language}}</div>\n                    <div>{{b.price}} USD</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}