{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ahmad/M7011E_project_grupp11/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction LoginComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"p\", 15);\n    i0.ɵɵtext(2, \" invalid username or password \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class LoginComponent {\n  constructor(router) {\n    this.router = router;\n    this.authService = inject(AuthService);\n    this.username = '';\n    this.password = '';\n    this.loginError = false;\n    if (this.authService.isAuthenticated()) {\n      if (this.authService.getRole() === 'customer') this.router.navigate(['home/']);else if (this.authService.getRole() === 'manager') this.router.navigate(['manager/home/']);else this.router.navigate(['admin/home/']);\n    }\n  }\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const username = _this.username;\n        const password = _this.password;\n        _this.username = '';\n        _this.password = '';\n        const loginData = yield _this.authService.login(username, password);\n        _this.loginError = false;\n        if (loginData.userProfile.defaultRole == 'customer') _this.router.navigate(['home/']);else if (loginData.userProfile.defaultRole == 'manager') _this.router.navigate(['manager/home/']);else _this.router.navigate(['admin/home/']);\n      } catch (e) {\n        _this.loginError = true;\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 24,\n    vars: 3,\n    consts: [[1, \"auth-box\"], [1, \"field\"], [1, \"control\", \"has-icons-left\", \"has-icons-right\"], [\"type\", \"email\", \"placeholder\", \"johnsmith@gmail.com\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"icon\", \"is-small\", \"is-left\"], [1, \"fas\", \"fa-envelope\"], [1, \"icon\", \"is-small\", \"is-right\"], [1, \"fas\", \"fa-check\"], [1, \"control\", \"has-icons-left\"], [\"type\", \"password\", \"placeholder\", \"password\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-lock\"], [1, \"control\"], [1, \"button\", \"is-success\", 3, \"click\"], [\"href\", \"register/\", 1, \"is-underlined\"], [\"class\", \"field\", 4, \"ngIf\"], [1, \"has-text-danger\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"section\", 0)(2, \"div\", 1)(3, \"p\", 2)(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.username = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"span\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵelement(8, \"i\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"div\", 1)(10, \"p\", 8)(11, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"span\", 4);\n        i0.ɵɵelement(13, \"i\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 1)(15, \"p\", 11)(16, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_16_listener() {\n          return ctx.login();\n        });\n        i0.ɵɵtext(17, \" Login \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 1)(19, \"p\");\n        i0.ɵɵtext(20, \" Don't have an account? \");\n        i0.ɵɵelementStart(21, \"a\", 13);\n        i0.ɵɵtext(22, \" Register \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(23, LoginComponent_div_23_Template, 3, 0, \"div\", 14);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.username);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.loginError);\n      }\n    },\n    dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\"body[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    background-color: #ffffff;\\n    overflow: hidden;\\n    height: 600px;\\n}\\n\\n.auth-box[_ngcontent-%COMP%] {\\n    padding: 25px;\\n    border: 1px solid #ccc;\\n    background-color: #fff;\\n    width: 600px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLHlCQUF5QjtJQUN6QixnQkFBZ0I7SUFDaEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWix1Q0FBdUM7QUFDM0MiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIGhlaWdodDogNjAwcHg7XHJcbn1cclxuXHJcbi5hdXRoLWJveCB7XHJcbiAgICBwYWRkaW5nOiAyNXB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbiAgICB3aWR0aDogNjAwcHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["inject","AuthService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent","constructor","router","authService","username","password","loginError","isAuthenticated","getRole","navigate","login","_this","_asyncToGenerator","loginData","userProfile","defaultRole","e","_","ɵɵdirectiveInject","i1","Router","_2","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_input_ngModelChange_4_listener","$event","ɵɵelement","LoginComponent_Template_input_ngModelChange_11_listener","LoginComponent_Template_button_click_16_listener","ɵɵtemplate","LoginComponent_div_23_Template","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\login\\login.component.ts","C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { LoginData } from '../interfaces/entities';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent {\n\n  authService: AuthService = inject(AuthService);\n\n  constructor(private router: Router) { \n    if(this.authService.isAuthenticated())\n    {\n      if(this.authService.getRole() === 'customer')\n        this.router.navigate(['home/']);\n      else if(this.authService.getRole() === 'manager')\n        this.router.navigate(['manager/home/']);\n      else\n        this.router.navigate(['admin/home/']);\n    }\n  }\n\n  username: String = '';\n  password: String = '';\n\n  loginError: boolean = false;\n\n  async login(): Promise<void> {\n    \n    try\n    {\n      const username = this.username;\n      const password = this.password;\n      this.username = '';\n      this.password = '';\n      const loginData: LoginData = await this.authService.login(username, password)\n      this.loginError = false;\n      if(loginData.userProfile.defaultRole == 'customer')\n        this.router.navigate(['home/']);\n      else if(loginData.userProfile.defaultRole == 'manager')\n        this.router.navigate(['manager/home/']);\n      else\n        this.router.navigate(['admin/home/']);\n    }\n    catch(e) {\n      this.loginError = true;\n    }\n    \n  }\n}\n","<body>\n    <section class = \"auth-box\">\n        <div class=\"field\">\n            <p class=\"control has-icons-left has-icons-right\">\n                <input class=\"input\" type=\"email\" placeholder=\"johnsmith@gmail.com\" [(ngModel)]=\"username\">\n                <span class=\"icon is-small is-left\">\n                <i class=\"fas fa-envelope\"></i>\n                </span>\n                <span class=\"icon is-small is-right\">\n                <i class=\"fas fa-check\"></i>\n                </span>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p class=\"control has-icons-left\">\n                <input class=\"input\" type=\"password\" placeholder=\"password\" [(ngModel)]=\"password\">\n                <span class=\"icon is-small is-left\">\n                <i class=\"fas fa-lock\"></i>\n                </span>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p class=\"control\">\n                <button class=\"button is-success\" (click) = \"login()\">\n                Login\n                </button>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p>\n                Don't have an account?\n                <a href=\"register/\" class=\"is-underlined\">\n                    Register\n                </a>\n            </p>\n        </div>\n        <div class=\"field\" *ngIf=\"loginError\">\n            <p class=\"has-text-danger\">\n                invalid username or password\n            </p>\n        </div>\n    </section>    \n</body>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}