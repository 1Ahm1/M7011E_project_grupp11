{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ahmad/M7011E_project_grupp11/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction RegisterComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"p\", 20);\n    i0.ɵɵtext(2, \" Invalid username or password \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class RegisterComponent {\n  constructor(router) {\n    this.router = router;\n    this.authService = inject(AuthService);\n    this.role = \"customer\";\n    this.username = '';\n    this.password = '';\n    this.rePassword = '';\n    this.name = '';\n    this.passwordError = false;\n    this.pendingUserId = 0;\n  }\n  register() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.password != _this.rePassword) {\n        _this.passwordError = true;\n      } else {\n        try {\n          const username = _this.username;\n          const password = _this.password;\n          const name = _this.name;\n          _this.username = '';\n          _this.password = '';\n          _this.rePassword = '';\n          const data = yield _this.authService.register(username, password, name, _this.role);\n          _this.pendingUserId = data.pendingUserId;\n          _this.router.navigate(['activate-user/']);\n          _this.passwordError = false;\n        } catch (e) {\n          _this.passwordError = true;\n        }\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function RegisterComponent_Factory(t) {\n    return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterComponent,\n    selectors: [[\"app-register\"]],\n    decls: 44,\n    vars: 6,\n    consts: [[1, \"auth-box\"], [1, \"field\"], [1, \"control\", \"has-icons-left\", \"has-icons-right\"], [\"type\", \"email\", \"placeholder\", \"johnsmith@gmail.com\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"icon\", \"is-small\", \"is-left\"], [1, \"fas\", \"fa-envelope\"], [1, \"icon\", \"is-small\", \"is-right\"], [1, \"fas\", \"fa-check\"], [1, \"control\", \"has-icons-left\"], [\"type\", \"password\", \"placeholder\", \"password\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-lock\"], [\"type\", \"password\", \"placeholder\", \"retype password\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"John Smith\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"label\"], [1, \"select\"], [3, \"ngModel\", \"ngModelChange\"], [1, \"control\"], [1, \"button\", \"is-success\", 3, \"click\"], [\"href\", \"/\", 1, \"is-underlined\"], [\"class\", \"field\", 4, \"ngIf\"], [1, \"has-text-danger\"]],\n    template: function RegisterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"section\", 0)(2, \"div\", 1)(3, \"p\", 2)(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.username = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"span\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵelement(8, \"i\", 7);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"div\", 1)(10, \"p\", 8)(11, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"span\", 4);\n        i0.ɵɵelement(13, \"i\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 1)(15, \"p\", 8)(16, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.rePassword = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"span\", 4);\n        i0.ɵɵelement(18, \"i\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\", 1)(20, \"p\", 8)(21, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"span\", 4);\n        i0.ɵɵelement(23, \"i\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"div\", 1)(25, \"label\", 13);\n        i0.ɵɵtext(26, \"Role\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 14)(28, \"select\", 15);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_select_ngModelChange_28_listener($event) {\n          return ctx.role = $event;\n        });\n        i0.ɵɵelementStart(29, \"option\");\n        i0.ɵɵtext(30, \"customer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"option\");\n        i0.ɵɵtext(32, \"manager\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"option\");\n        i0.ɵɵtext(34, \"admin\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(35, \"div\", 1)(36, \"p\", 16)(37, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_37_listener() {\n          return ctx.register();\n        });\n        i0.ɵɵtext(38, \" Register \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(39, \"div\", 1)(40, \"p\")(41, \"a\", 18);\n        i0.ɵɵtext(42, \" Login \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(43, RegisterComponent_div_43_Template, 3, 0, \"div\", 19);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.username);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.rePassword);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.name);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.role);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngIf\", ctx.passwordError);\n      }\n    },\n    dependencies: [i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\"body[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    background-color: #ffffff;\\n    overflow: hidden;\\n    height: 600px;\\n}\\n\\n.auth-box[_ngcontent-%COMP%] {\\n    padding: 25px;\\n    border: 1px solid #ccc;\\n    background-color: #fff;\\n    width: 600px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsdUJBQXVCO0lBQ3ZCLHlCQUF5QjtJQUN6QixnQkFBZ0I7SUFDaEIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLFlBQVk7SUFDWix1Q0FBdUM7QUFDM0MiLCJzb3VyY2VzQ29udGVudCI6WyJib2R5IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIGhlaWdodDogNjAwcHg7XHJcbn1cclxuXHJcbi5hdXRoLWJveCB7XHJcbiAgICBwYWRkaW5nOiAyNXB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbiAgICB3aWR0aDogNjAwcHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["inject","AuthService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","RegisterComponent","constructor","router","authService","role","username","password","rePassword","name","passwordError","pendingUserId","register","_this","_asyncToGenerator","data","navigate","e","_","ɵɵdirectiveInject","i1","Router","_2","selectors","decls","vars","consts","template","RegisterComponent_Template","rf","ctx","ɵɵlistener","RegisterComponent_Template_input_ngModelChange_4_listener","$event","ɵɵelement","RegisterComponent_Template_input_ngModelChange_11_listener","RegisterComponent_Template_input_ngModelChange_16_listener","RegisterComponent_Template_input_ngModelChange_21_listener","RegisterComponent_Template_select_ngModelChange_28_listener","RegisterComponent_Template_button_click_37_listener","ɵɵtemplate","RegisterComponent_div_43_Template","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\register\\register.component.ts","C:\\Users\\ahmad\\M7011E_project_grupp11\\library-front\\src\\app\\register\\register.component.html"],"sourcesContent":["import { Component, inject } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent {\n\n  constructor(private router: Router) {}\n\n  authService: AuthService = inject(AuthService);\n\n  role: String = \"customer\";\n  username: String = '';\n  password: String = '';\n  rePassword: String = '';\n  name: String = '';\n  passwordError: boolean = false;\n  pendingUserId: number = 0;\n  async register(): Promise<void>\n  {\n    \n    if(this.password != this.rePassword)\n    {\n      this.passwordError = true;\n    }\n    else\n    {\n      try\n      {\n        const username = this.username;\n        const password = this.password;\n        const name = this.name;\n        this.username = '';\n        this.password = '';\n        this.rePassword = '';\n        const data = await this.authService.register(username, password, name, this.role)\n        this.pendingUserId = data.pendingUserId;\n        this.router.navigate(['activate-user/'])\n        this.passwordError = false;\n      }\n      catch(e) {\n        this.passwordError = true;\n      }\n    }\n    \n  }\n}\n","<body>\n    <section class=\"auth-box\">\n        <div class=\"field\">\n            <p class=\"control has-icons-left has-icons-right\">\n                <input class=\"input\" type=\"email\" placeholder=\"johnsmith@gmail.com\" [(ngModel)]=\"username\">\n                <span class=\"icon is-small is-left\">\n                    <i class=\"fas fa-envelope\"></i>\n                </span>\n                <span class=\"icon is-small is-right\">\n                    <i class=\"fas fa-check\"></i>\n                </span>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p class=\"control has-icons-left\">\n                <input class=\"input\" type=\"password\" placeholder=\"password\" [(ngModel)]=\"password\">\n                <span class=\"icon is-small is-left\">\n                    <i class=\"fas fa-lock\"></i>\n                </span>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p class=\"control has-icons-left\">\n                <input class=\"input\" type=\"password\" placeholder=\"retype password\" [(ngModel)]=\"rePassword\">\n                <span class=\"icon is-small is-left\">\n                    <i class=\"fas fa-lock\"></i>\n                </span>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p class=\"control has-icons-left\">\n                <input class=\"input\" type=\"text\" placeholder=\"John Smith\" [(ngModel)]=\"name\">\n                <span class=\"icon is-small is-left\">\n                    <i class=\"fas fa-lock\"></i>\n                </span>\n            </p>\n        </div>\n\n        <div class=\"field\">\n            <label class=\"label\">Role</label>\n            <div class=\"select\">\n                <select [(ngModel)]=\"role\">\n                    <option>customer</option>\n                    <option>manager</option>\n                    <option>admin</option>\n                </select>\n            </div>\n        </div>\n        <div class=\"field\">\n            <p class=\"control\">\n                <button class=\"button is-success\" (click)=\"register()\">\n                    Register\n                </button>\n            </p>\n        </div>\n        <div class=\"field\">\n            <p>\n                <a href=\"/\" class=\"is-underlined\">\n                    Login\n                </a>\n            </p>\n        </div>\n        <div class=\"field\" *ngIf=\"passwordError\">\n            <p class=\"has-text-danger\">\n                Invalid username or password\n            </p>\n        </div>\n    </section>\n</body>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}